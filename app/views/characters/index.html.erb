<!-- <h1>Listagem de todos personagens</h1> -->
<%= link_to("Cadastrar novo personagem", new_character_path, class: 'admin') %>

<br>

<div class="p-2">
    <div class="row">
      <div class="form-group col-lg-2 col-4">
        <!-- collection_ranks, :first, :second, ao inves de Rank.all para adicionar 'Todos' -->
      <%= collection_select(nil, :rank_id, collection_ranks, :first, :second, { selected: '0'}, {class: 'form-control', onchange: 'search()'}) %>
      </div>
      <div class="form-group col-lg-4 col-8">
      <%= select_tag :order, options_for_select([['Pontos de Vida', 'health'], ['Ataque Físico', 'patk'], ['Defesa Física', 'pdef'], ['Ataque Cósmico', 'matk'], ['Defesa Cósmica', 'mdef'], ['Velocidade', 'speed']]), 
                     { prompt: 'Ordenar por...', class: 'form-control', selected: params[:order], onchange: 'search()' } %>
      </div>
      <div class="form-group col-lg-6">
        <%= search_field_tag :q, params[:q], class: 'form-control search-field', placeholder: 'Buscar Personagem', onchange: 'search()' %>
        <%# content_tag(:button, fa_icon("search 2x"), class: 'form-control-feedback') %>
      </div>
    </div>
</div>

<div class="row" id="characters-grid">
  <%= render @characters %>
</div>
<%= content_tag(:div, render('next_link'), id: 'div_next_link') %>

<script>
  $('#q').on( 'input', function() { 
    var search_text = $('#q').val()
    if (search_text.length > 2 || search_text.length == 0) { search() }  
  } )
</script>